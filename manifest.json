{
  "service": {
    "name":"learn-spring-kotlin",
    "versionFile":"./version.txt"
  },
  "gradle":{
    "exe":"./gradlew",
    "clean":"clean",
    "build":"build -x test"
  },
  "docker": {
    "compose": {
      "up":"-f docker/docker-compose.yml up",
      "down":"-f docker/docker-compose.yml down"
    },
    "app": {
      "build":{
        "command":"build -t $(DOCKER_TAG_LOCAL) -f docker/app/Dockerfile ."
      },
      "tag": {
        "local":"local/$(SERVICE_NAME):$(SERVICE_VERSION)",
        "remote":"docker.io/bastman77/$(SERVICE_NAME):$(SERVICE_VERSION)"
      }
    }
  },
  "k8s": {
    "concern":{
      "dev": {
        "k8sContext":"minikube",
        "k8sApp":"learn-spring-kotlin-app-dev",
        "k8sDeployment":"learn-spring-kotlin-app-dev",
        "deployment": {
          "create":{
            "command":"apply -f ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml --record"
          },
          "apply":{
            "command":"apply -f ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml --record"
          },
          "export":{
            "command":"get deployment $(K8S_DEPLOYMENT_NAME) --export $(K8S_COMMAND_ARGS)",
            "args":"-o yaml > ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.export.yml"
          },
          "delete":{
            "command":"delete deployment $(K8S_DEPLOYMENT_NAME)"
          },
          "patch":{
            "patchFile":"./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml",
            "args":"--record"
          }
        }
      },
      "prod": {
        "k8sContext":"minikube",
        "k8sApp":"learn-spring-kotlin-app-prod",
        "k8sDeployment":"learn-spring-kotlin-app-prod",
        "deployment": {
          "create":{
            "command":"apply -f ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml --record"
          },
          "apply":{
            "command":"apply -f ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml --record"
          },
          "export":{
            "command":"get deployment $(K8S_DEPLOYMENT_NAME) --export $(K8S_COMMAND_ARGS)",
            "args":"-o yaml > ./k8s/app/app-$(DEPLOY_CONCERN)/deployment.export.yml"
          },
          "delete":{
            "command":"delete deployment $(K8S_DEPLOYMENT_NAME)"
          },
          "patch":{
            "patchFile":"./k8s/app/app-$(DEPLOY_CONCERN)/deployment.yml",
            "args":"--record"
          }
        }
      }
    }
  }
}